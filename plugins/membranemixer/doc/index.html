<!--#set var="TITLE" value="Membrane Mixer, Version 1.0"-->
<!--#include virtual="/Research/vmd/include/header-vmd.shtml"-->

<img src="membranemixer_gui.png" align="right" alt="Membrane Mixer GUI" height=660px border=0 hspace=2px margin-top=2px>


<p><strong>Membrane Mixer</strong> provides a rapid way to generate multiple membranes by shuffling lipids.
The resulting membranes are essentially identical to the original membrane in terms of 
chemico-physical properties. 
During the execution of the plugin and for each new replica, two NAMD equilibrations are automatically run with a 
grid-force potential applied to specific lipids in the membrane. This external potential has the task to reduce
clashes introduced during the shuffling process, and it is reduced to zero
during the second equilibration.


<h2>Opening Membrane Mixer</h2>
<p>
<strong>Membrane Mixer</strong> is located in VMD <strong>Extensions</strong> &#10230; <strong>Modeling</strong> &#10230; <strong>Membrane Mixer</strong>. 
</p>

<h2>The Graphical User Interface</h2>

<p>
For most of the cases, the user will need to provide only a PSF and PDB file of the original membrane.
The system can contain any other molecule (e.g. water, ions, proteins) as long as additional parameter files are provided
if not already present in the standard CHARMM force field.
Below are descriptions of GUI sections and options.

<h3><u>Input files</u></h3>

<b>PSF file</b>: select the .psf file containing the topology of the original membrane.
<br>
<b>PDB file</b>: select the .pdb file containing the coordinate of the original membrane.
<br>
A configuration file to run NAMD is automatically generated by the plugin that should work
with most of the systems. In case the user wants to use a custom configuration file,
this can be done by selecting the <b>"Use a custom configuration file"</b> box and choosing the appropriate
CONF file for the system.
<br>
<b>CONF file</b>: provide a custom configuration file that can run NAMD with the selected structure.
The <b>Additional parameter files</b> box allows the user to add parameter files which are not included
in the custom or default configuration file (e.g. for a specific molecule that is not included in the standard
CHARMM force field).
<br>
<b>Additional parameter files</b>: these additional parameter files will be included in the parameter section
of the NAMD configuration file (default or custom).
<br>
<b>Output path</b>: select the master folder where all replicas and related files will be placed. If the folder does not exist,
it will be created. The plugin works by initially running all simulations relative to a replica in this
directory and then moving all the files related to the current replica to a specific folder within the master directory. 
All files and folders generated by the plugin have a "MMP" prefix.
<br>



<h3><u>Selection of lipids and restraints</u></h3>

<b>Lipid selection</b>: shuffling lipids are chosen from this selection (default "segname MEMB").
The <b>Guess</b> button attempts retrieving this information automatically from selected PSF and PDB files. 
<br>
<b>Restrain bilayer</b>: due to the application of an external potential on shuffling lipids during the MD simulations, 
the two leaflets must be restrained to their initial positions, otherwise they might separate. This option applies a Colvar restraint
on the center of mass of phosphate atoms in each leaflet. If cholesterol molecules are present,
an additional Colvar restraint is applied on the average center of mass of their oxygen atoms.
If a custom configuration file is provided, any other Colvar directive in the file will be ignored. If the custom
configuration file contains already bilayer restraints, the user may want to deselect this option.
<br>
<b>Restrain group</b>: additional groups can be restrained during NAMD equilibrations. This is especially
necessary if a protein is included in the membrane, since the plugin protocol might cause large
conformational changes in the protein. Therefore, it is highly advised to use this option in such a case. 
The option allows to choose the atom selection and force constant.
<br>
<b>Exchange only XY, keeping original Z</b>: by default, the shuffling algorithmt exchanges only the center of mass X and Y coordinates
of the shuffling pairs, keeping the Z unmodified. This avoids that lipids are moved too deep into or even outside the membrane.
Deselecting this option will use full center of mass during the shuffling procedure.
<br>

<h3><u>Replica-specific settings</u></h3>

<b>Lipid exchange (%)</b>: this percentage indicates the amount of lipids specified in <b>Lipid selection</b> that
will be shuffled. It is not advisable and necessary to exchange 100% of lipids, as this might cause unstability 
in the systems that cannot be easily solved. Values between 50-80% show reasonable results in terms of change 
of lipid configuration and membrane stability.
<br>
<b>Num. of membrane replicas</b>: this option specifies how many replicas will be automatically and serially generated by the plugin.
<br>

<h3><u>Simulation settings</u></h3>

<b>First equilibration</b>: specify the number of minimization steps (<b>Min. steps</b>, default 1000) and MD steps (<b>MD steps</b>, default 2000) 
to run in the first equilibration. The time step in the default configuration file is 1.0 fs, therefore
only 2 ps of MD simulation will be run in the first equilibration with default settings.
<br>
<b>Second equilibration</b>: specify the number of minimization steps (<b>Min. steps</b>, default 1000) and MD steps (<b>MD steps</b>, default 2000) 
to run in the second equilibration (after lipid shuffling procedure). 
The second equilibration is 6 times longer than what specified in <b>MD steps</b>. Inf fact, at every <b>MD steps</b>
the grid-force potential is decreased till zero. The last 2*<b>MD steps</b> run conventional MD without an external
potential.
The time step in the default configuration file is 1.0 fs, therefore
a total of 12 ps of MD simulation will be run in the second equilibration with default settings.
<br>

<h3><u>NAMD settings</u></h3>

<b>NAMD path</b>: specify the absolute path to NAMD executable.
<br>
<b>NAMD options</b>: according to your workstation, you may need to modify these options to maximize
NAMD simulation speed and compatibility. 
<br>

<h3><u>Ready to run</u></h3>

<b>RUN NOW!</b>: the plugin will be excecuted immediately in the current VMD session, running automatically all necessary NAMD simulations.
<br>
<b>Build script</b>: the plugin generates a TCL script that can be run in any other machine with VMD and NAMD installed. The
TCL script can be executed in VMD text mode, e.g. <tt>vmd -dispdev text -e "MMP.RunScript.tcl"</tt>
<br>

</p>

<p>
The empty box below the running buttons visualize some details about the status and progress of the plugin.
A file called "MMP.PROGRESS.txt" provides more information on the progress of the plugin.
</p>


<h2>Caveats and limitations</h2>
<p>
<strong>Membrane Mixer</strong> is only compatible with flat membranes and nanodiscs.
Remember alway to double-check if the final generated membrane looks fine. The plugin fixes ring piercings but it cannot detect if there are
lipid tails crossing over protein loops. Please check if you have such a case and just discard that specific replica.<br>
<br>
The <strong>Cispeptide</strong> plugin is used to check if there are <i>cis</i> peptide bonds in protein structure at the end of the plugin protocol. However, if the
protein is not wrapped into the simulation cell and some bonds are stretched over the periodic boundary conditions, the the plugin 
might detect such stretched bonds as <i>cis</i>, even if they are <i>trans</i>. Moreover, few <i>cis</i> peptide bonds are naturally occuring, like in some proline.
The user should check if this is the case with their protein.<br>
<br>
If separation between the two membrane leaflets is observed even after restraining the bilayer, increase the value for the restraint force constant.
Larger membranes may need higher values for the force constant to keep the two leaflets in place.
</p>

<h2>Citation</h2>
<p>
If you use membranes generated using <strong>Membrane Mixer</strong>, please cite:
<br>
<ins>G. Licari, S. Dehghani-Ghahnaviyeh, E. Tajkhorshid, <i>in preparation.</i></ins>
</p>

<h2>Authors</h2>
<ul>
<li>Giuseppe Licari, Theoretical and Computational Biophysics Group, 
    University of Illinois at Urbana-Champaign 
<li>Sepehr Dehghani-Ghahnaviyeh, Theoretical and Computational Biophysics Group, 
    University of Illinois at Urbana-Champaign 
</ul>
<!--#include virtual="/Research/vmd/include/footer-vmd.shtml"-->
